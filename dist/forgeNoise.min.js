(t=>{let F=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]],M=F.map(t=>[t[0],t[1]]),E=[[0,1,1,1],[0,1,1,-1],[0,1,-1,1],[0,1,-1,-1],[0,-1,1,1],[0,-1,1,-1],[0,-1,-1,1],[0,-1,-1,-1],[1,0,1,1],[1,0,1,-1],[1,0,-1,1],[1,0,-1,-1],[-1,0,1,1],[-1,0,1,-1],[-1,0,-1,1],[-1,0,-1,-1],[1,1,0,1],[1,1,0,-1],[1,-1,0,1],[1,-1,0,-1],[-1,1,0,1],[-1,1,0,-1],[-1,-1,0,1],[-1,-1,0,-1],[1,1,1,0],[1,1,-1,0],[1,-1,1,0],[1,-1,-1,0],[-1,1,1,0],[-1,1,-1,0],[-1,-1,1,0],[-1,-1,-1,0]],v=t=>t*t*t*(t*(6*t-15)+10),d=(t,e,r)=>e+t*(r-e),y=(t,e,r)=>t[0]*e+t[1]*r,P=(t,e,r,o)=>t[0]*e+t[1]*r+t[2]*o,G=(t,e,r,o,n)=>t[0]*e+t[1]*r+t[2]*o+t[3]*n;function f(t,e,r){var t=7&t,o=t>>2,n=o?r:e,o=o?e:r;return(1&t?-n:n)+(2&t?-o:o)}function s(t,e,r,o){var t=15&t,n=t<8?e:r,r=t<4?r:12==t||14==t?e:o;return(1&t?-n:n)+(2&t?-r:r)}function e(t){this.p=new Uint8Array(512),this.initSeed(t)}e.prototype.initSeed=function(t){var e=new Uint8Array(256);for(let t=0;t<256;t++)e[t]=t;let r=0|(void 0===t?Math.floor(2147483647*Math.random()):t);r<=0&&(r=1);for(let t=255;0<t;t--){var o=(r=16807*r%2147483647)%(t+1);[e[t],e[o]]=[e[o],e[t]]}for(let t=0;t<512;t++)this.p[t]=e[255&t]},e.prototype.generate2D=function(t,e){var r=Math.floor(t),o=Math.floor(e),n=255&r,a=255&o,t=t-r,r=e-o,e=v(t),o=v(r),i=this.p,l=i[n]+a,n=i[1+n]+a,a=f(i[l],t,r),p=f(i[n],t-1,r),l=f(i[l+1],t,r-1),i=f(i[n+1],t-1,r-1);return d(o,d(e,a,p),d(e,l,i))},e.prototype.generate3D=function(t,e,r){var o=Math.floor(t),n=Math.floor(e),a=Math.floor(r),i=255&o,l=255&n,p=255&a,t=t-o,o=e-n,e=r-a,n=v(t),r=v(o),a=v(e),f=this.p,u=f[i]+l,i=f[1+i]+l,l=f[u]+p,u=f[u+1]+p,h=f[i]+p,i=f[i+1]+p;return d(a,d(r,d(n,s(f[l],t,o,e),s(f[h],t-1,o,e)),d(n,s(f[u],t,o-1,e),s(f[i],t-1,o-1,e))),d(r,d(n,s(f[l+1],t,o,e-1),s(f[h+1],t-1,o,e-1)),d(n,s(f[u+1],t,o-1,e-1),s(f[i+1],t-1,o-1,e-1))))},e.prototype.generateSimplex2D=function(t,e){var r=.5*(Math.sqrt(3)-1),o=(3-Math.sqrt(3))/6,r=(t+e)*r,n=Math.floor(t+r),r=Math.floor(e+r),a=(n+r)*o,t=t-(n-a),e=e-(r-a);let i,l;l=e<t?(i=1,0):(i=0,1);var a=t-i+o,p=e-l+o,f=t-1+2*o,o=e-1+2*o,n=255&n,r=255&r,u=this.p,h=u[n+u[r]]%12,s=u[n+i+u[r+l]]%12,n=u[1+n+u[1+r]]%12;let c=0,g=0,D=0;u=.5-t*t-e*e,0<=u&&(u*=u,c=u*u*y(M[h],t,e)),r=.5-a*a-p*p,0<=r&&(r*=r,g=r*r*y(M[s],a,p)),u=.5-f*f-o*o;return 0<=u&&(u*=u,D=u*u*y(M[n],f,o)),70*(c+g+D)},e.prototype.generateSimplex3D=function(t,e,r){var o=1/6,n=(t+e+r)*(1/3),a=Math.floor(t+n),i=Math.floor(e+n),n=Math.floor(r+n),l=(a+i+n)*o,t=t-(a-l),e=e-(i-l),r=r-(n-l);let p,f,u,h,s,c;c=e<=t?r<=e?(p=1,f=0,u=0,h=1,s=1,0):(s=(h=(u=r<=t?(p=1,f=0):(p=0,f=0,1),1),0),1):e<r?(p=0,f=0,u=1,h=0,s=1):t<r?(p=0,f=1,u=0,h=0,s=1):(p=0,f=1,u=0,h=1,s=1,0);var l=t-p+o,g=e-f+o,D=r-u+o,M=t-h+2*o,y=e-s+2*o,o=r-c+2*o,v=t-1+.5,d=e-1+.5,m=r-1+.5,a=255&a,i=255&i,n=255&n,S=this.p,x=S[a+S[i+S[n]]]%12,b=S[a+p+S[i+f+S[n+u]]]%12,V=S[a+h+S[i+s+S[n+c]]]%12,a=S[1+a+S[1+i+S[1+n]]]%12;let q=0,W=0,w=0,C=0;i=.6-t*t-e*e-r*r,0<=i&&(i*=i,q=i*i*P(F[x],t,e,r)),S=.6-l*l-g*g-D*D,0<=S&&(S*=S,W=S*S*P(F[b],l,g,D)),n=.6-M*M-y*y-o*o,0<=n&&(n*=n,w=n*n*P(F[V],M,y,o)),i=.6-v*v-d*d-m*m;return 0<=i&&(i*=i,C=i*i*P(F[a],v,d,m)),32*(q+W+w+C)},e.prototype.generateValue2D=function(t,e){var r=Math.floor(t),o=r+1,n=Math.floor(e),a=n+1,t=t-r,e=e-n,t=v(t),e=v(e),i=this.p,l=i[r+i[255&n]&255]/255,r=i[r+i[255&a]&255]/255,n=i[o+i[255&n]&255]/255,o=i[o+i[255&a]&255]/255,i=d(t,l,n),a=d(t,r,o);return d(e,i,a)},e.prototype.generateValue3D=function(t,e,r){var o=Math.floor(t),n=o+1,a=Math.floor(e),i=a+1,l=Math.floor(r),p=l+1,t=t-o,e=e-a,r=r-l,t=v(t),e=v(e),r=v(r),f=this.p,u=f[255&o]+(255&a),a=f[255&n]+(255&a),o=f[255&o]+(255&i),n=f[255&n]+(255&i),i=f[f[u]+(255&l)]/255,h=f[f[a]+(255&l)]/255,u=f[f[u+1]+(255&l)]/255,a=f[f[a+1]+(255&l)]/255,l=f[f[o]+(255&p)]/255,s=f[f[n]+(255&p)]/255,o=f[f[o+1]+(255&p)]/255,f=f[f[n+1]+(255&p)]/255,n=d(e,d(t,i,h),d(t,u,a)),p=d(e,d(t,l,s),d(t,o,f));return d(r,n,p)},e.prototype.getCellPoint2D=function(t,e){var r=this.p,o=255&t,n=r[255&e];return[t+r[o+n&255]/256,e+r[1+o+n&255]/256]},e.prototype.getCellPoint3D=function(t,e,r){var o=this.p,n=255&t,a=o[(255&e)+o[255&r]];return[t+o[n+a&255]/256,e+o[1+n+a&255]/256,r+o[2+n+a&255]/256]},e.prototype.generateWorley2D=function(t,e){var r=Math.floor(t),o=Math.floor(e);let n=1/0;var a,i=[-1,0,1];for(a of i)for(var l of i){var l=this.getCellPoint2D(r+a,o+l),p=l[0]-t,p=Math.hypot(p,l[1]-e);p<n&&(n=p)}return n},e.prototype.generateWorley3D=function(t,e,r){var o=Math.floor(t),n=Math.floor(e),a=Math.floor(r);let i=1/0;var l,p=[-1,0,1];for(l of p)for(var f of p)for(var u of p){var u=this.getCellPoint3D(o+l,n+f,a+u),h=u[0]-t,s=u[1]-e,u=u[2]-r,h=Math.sqrt(h*h+s*s+u*u);h<i&&(i=h)}return i},e.prototype.generateVoronoi2D=function(t,e){var r=Math.floor(t),o=Math.floor(e);let n=1/0,a,i;var l,p=[-1,0,1];for(l of p)for(var f of p){var u=r+l,f=o+f,h=this.getCellPoint2D(u,f),s=h[0]-t,h=h[1]-e,s=s*s+h*h;s<n&&(n=s,a=u,i=f)}return{distance:Math.sqrt(n),cellI:a,cellJ:i}},e.prototype.generateFractal2D=function(e,r,t={}){var o=t.octaves||4,n=t.persistence||.5,a=t.lacunarity||2,i=!1!==t.normalized,l=t.ridged||!1,p=t.turbulence||!1;let f=0,u=t.scale||1,h=1,s=0;for(let t=0;t<o;t++){let t=this.generate2D(e*u,r*u);l?t=1-Math.abs(t):p&&(t=Math.abs(t)),f+=t*h,s+=h,h*=n,u*=a}return i?f/s:f},e.prototype.generateFractal3D=function(e,r,o,t={}){var n=t.octaves||4,a=t.persistence||.5,i=t.lacunarity||2,l=!1!==t.normalized,p=t.ridged||!1,f=t.turbulence||!1;let u=0,h=t.scale||1,s=1,c=0;for(let t=0;t<n;t++){let t=this.generate3D(e*h,r*h,o*h);p?t=1-Math.abs(t):f&&(t=Math.abs(t)),u+=t*s,c+=s,s*=a,h*=i}return l?u/c:u},e.prototype.generateSimplexFractal2D=function(e,r,t={}){var o=t.octaves||4,n=t.persistence||.5,a=t.lacunarity||2,i=!1!==t.normalized,l=t.ridged||!1,p=t.turbulence||!1;let f=0,u=t.scale||1,h=1,s=0;for(let t=0;t<o;t++){let t=this.generateSimplex2D(e*u,r*u);l?t=1-Math.abs(t):p&&(t=Math.abs(t)),f+=t*h,s+=h,h*=n,u*=a}return i?f/s:f},e.prototype.generateSimplexFractal3D=function(e,r,o,t={}){var n=t.octaves||4,a=t.persistence||.5,i=t.lacunarity||2,l=!1!==t.normalized,p=t.ridged||!1,f=t.turbulence||!1;let u=0,h=t.scale||1,s=1,c=0;for(let t=0;t<n;t++){let t=this.generateSimplex3D(e*h,r*h,o*h);p?t=1-Math.abs(t):f&&(t=Math.abs(t)),u+=t*s,c+=s,s*=a,h*=i}return l?u/c:u},e.prototype.generate4D=function(t,e,r,o){var n=Math.floor(t),a=Math.floor(e),i=Math.floor(r),l=Math.floor(o),p=255&n,f=255&a,u=255&i,h=255&l,t=t-n,n=e-a,e=r-i,a=o-l,r=v(t),i=v(n),o=v(e),l=v(a),s=this.p,c=s[p]+f,g=s[c]+u,D=s[g]+h,g=s[g+1]+h,p=s[1+p]+f,f=s[p]+u,M=s[f]+h,f=s[f+1]+h,c=s[c+1]+u,y=s[c]+h,c=s[c+1]+h,p=s[p+1]+u,u=s[p]+h,p=s[p+1]+h,h=(t,e,r,o,n)=>G(E[31&t],e,r,o,n);return d(l,d(o,d(i,d(r,h(s[D],t,n,e,a),h(s[M],t-1,n,e,a)),d(r,h(s[y],t,n-1,e,a),h(s[u],t-1,n-1,e,a))),d(i,d(r,h(s[g],t,n,e-1,a),h(s[f],t-1,n,e-1,a)),d(r,h(s[c],t,n-1,e-1,a),h(s[p],t-1,n-1,e-1,a)))),d(o,d(i,d(r,h(s[D+1],t,n,e,a-1),h(s[M+1],t-1,n,e,a-1)),d(r,h(s[y+1],t,n-1,e,a-1),h(s[u+1],t-1,n-1,e,a-1))),d(i,d(r,h(s[g+1],t,n,e-1,a-1),h(s[f+1],t-1,n,e-1,a-1)),d(r,h(s[c+1],t,n-1,e-1,a-1),h(s[p+1],t-1,n-1,e-1,a-1)))))},e.prototype.generateSimplex4D=function(t,e,r,o){var n=(Math.sqrt(5)-1)/4,a=(5-Math.sqrt(5))/20,n=(t+e+r+o)*n,i=Math.floor(t+n),l=Math.floor(e+n),p=Math.floor(r+n),n=Math.floor(o+n),f=(i+l+p+n)*a,t=t-(i-f),e=e-(l-f),r=r-(p-f),o=o-(n-f),f=[[1,0,0,0,1,1,0,0,1,1,1,0],[1,0,0,0,1,1,0,0,1,1,1,0],[0,1,0,0,1,1,0,0,1,1,1,0],[1,0,0,0,1,0,1,0,1,1,1,0],[0,0,1,0,1,0,1,0,1,1,1,0],[0,1,0,0,0,1,1,0,1,1,1,0],[0,0,1,0,0,1,1,0,1,1,1,0],[0,0,0,1,1,0,0,1,1,1,1,0],[0,1,0,0,0,1,0,1,1,1,1,0],[0,0,1,0,0,1,0,1,1,1,1,0],[0,0,0,1,0,0,1,1,1,1,1,0],[1,0,0,0,1,0,0,1,1,1,0,1],[0,0,0,1,1,0,0,1,1,1,0,1],[0,0,0,1,0,1,0,1,1,1,0,1],[0,0,0,1,0,0,1,1,1,1,0,1],[0,0,0,1,0,0,1,1,0,1,1,1]][(e<t?32:0)+(r<t?16:0)+(r<e?8:0)+(o<t?4:0)+(o<e?2:0)+(o<r?1:0)],u=f[0],h=f[1],s=f[2],c=f[3],g=f[4],D=f[5],M=f[6],y=f[7],v=f[8],d=f[9],J=f[10],f=f[11],m=t-u+a,S=e-h+a,x=r-s+a,b=o-c+a,V=t-g+2*a,q=e-D+2*a,W=r-M+2*a,w=o-y+2*a,C=t-v+3*a,F=e-d+3*a,P=r-J+3*a,z=o-f+3*a,T=t-1+4*a,A=e-1+4*a,U=r-1+4*a,a=o-1+4*a,i=255&i,l=255&l,p=255&p,n=255&n,I=this.p,N=I[i+I[l+I[p+I[n]]]]%32,u=I[i+u+I[l+h+I[p+s+I[n+c]]]]%32,h=I[i+g+I[l+D+I[p+M+I[n+y]]]]%32,s=I[i+v+I[l+d+I[p+J+I[n+f]]]]%32,c=I[1+i+I[1+l+I[1+p+I[1+n]]]]%32;let X=0,Y=0,j=0,k=0,B=0;g=.6-t*t-e*e-r*r-o*o,0<=g&&(g*=g,X=g*g*G(E[N],t,e,r,o)),D=.6-m*m-S*S-x*x-b*b,0<=D&&(D*=D,Y=D*D*G(E[u],m,S,x,b)),M=.6-V*V-q*q-W*W-w*w,0<=M&&(M*=M,j=M*M*G(E[h],V,q,W,w)),y=.6-C*C-F*F-P*P-z*z,0<=y&&(y*=y,k=y*y*G(E[s],C,F,P,z)),v=.6-T*T-A*A-U*U-a*a;return 0<=v&&(v*=v,B=v*v*G(E[c],T,A,U,a)),27*(X+Y+j+k+B)},e.prototype.generateTiling2D=function(t,e,r={}){var o=r.periodX||256;return this.generate2D(t%o,e%(r.periodY||256))},e.prototype.warp2D=function(t,e,r={}){var o=r.warpStrength||1,n=r.warpScale||1,a=r.iterations||1;let i=t,l=e;for(let t=0;t<a;t++){var p=this.generate2D(i*n,l*n),f=this.generate2D(i*n+5.2,l*n+1.3);i+=p*o,l+=f*o}return this.generate2D(i,l)},e.prototype.generate2D01=function(t,e){return.5*(this.generate2D(t,e)+1)},e.prototype.generate3D01=function(t,e,r){return.5*(this.generate3D(t,e,r)+1)},e.prototype.generateSimplex2D01=function(t,e){return.5*(this.generateSimplex2D(t,e)+1)},e.prototype.generateSimplex3D01=function(t,e,r){return.5*(this.generateSimplex3D(t,e,r)+1)},e.prototype.generateValue2D01=function(t,e){return this.generateValue2D(t,e)},e.prototype.generateValue3D01=function(t,e,r){return this.generateValue3D(t,e,r)},e.prototype.generateWorley2D01=function(t,e){return this.generateWorley2D(t,e)/1.414},e.prototype.generateWorley3D01=function(t,e,r){return this.generateWorley3D(t,e,r)/1.732},e.prototype.generate4D01=function(t,e,r,o){return.5*(this.generate4D(t,e,r,o)+1)},e.prototype.generateSimplex4D01=function(t,e,r,o){return.5*(this.generateSimplex4D(t,e,r,o)+1)},e.prototype.generateTiling2D01=function(t,e,r){return.5*(this.generateTiling2D(t,e,r)+1)},"undefined"!=typeof module&&module.exports?module.exports=e:t.ForgeNoise=e})(this);

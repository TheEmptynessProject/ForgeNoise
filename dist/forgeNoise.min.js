(t=>{let F=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]],D=F.map(t=>[t[0],t[1]]),E=[[0,1,1,1],[0,1,1,-1],[0,1,-1,1],[0,1,-1,-1],[0,-1,1,1],[0,-1,1,-1],[0,-1,-1,1],[0,-1,-1,-1],[1,0,1,1],[1,0,1,-1],[1,0,-1,1],[1,0,-1,-1],[-1,0,1,1],[-1,0,1,-1],[-1,0,-1,1],[-1,0,-1,-1],[1,1,0,1],[1,1,0,-1],[1,-1,0,1],[1,-1,0,-1],[-1,1,0,1],[-1,1,0,-1],[-1,-1,0,1],[-1,-1,0,-1],[1,1,1,0],[1,1,-1,0],[1,-1,1,0],[1,-1,-1,0],[-1,1,1,0],[-1,1,-1,0],[-1,-1,1,0],[-1,-1,-1,0]];function y(t,e,r){return t[0]*e+t[1]*r}function P(t,e,r,o){return t[0]*e+t[1]*r+t[2]*o}function G(t,e,r,o,n){return t[0]*e+t[1]*r+t[2]*o+t[3]*n}function v(t){return t*t*t*(t*(6*t-15)+10)}function d(t,e,r){return e+t*(r-e)}function e(t){this.p=new Uint8Array(512),this.initSeed(t)}function p(t,e,r){var t=7&t,o=t<4?e:r,r=t<4?r:e;return(1&t?-o:o)+(2&t?-r:r)}function s(t,e,r,o){var t=15&t,n=t<8?e:r,r=t<4?r:12==t||14==t?e:o;return(1&t?-n:n)+(2&t?-r:r)}e.prototype.initSeed=function(t){var e=new Uint8Array(256);for(let t=0;t<256;t++)e[t]=t;let r=0|(void 0===t?Math.floor(2147483647*Math.random()):t);r<=0&&(r=1);for(let t=255;0<t;t--){var o=(r=16807*r%2147483647)%(t+1);[e[t],e[o]]=[e[o],e[t]]}for(let t=0;t<512;t++)this.p[t]=e[255&t]},e.prototype.generate2D=function(t,e){var r=255&Math.floor(t),o=255&Math.floor(e),n=(t-=Math.floor(t),e-=Math.floor(e),v(t)),a=v(e),l=this.p,i=l[r]+o,r=l[1+r]+o;return d(a,d(n,p(l[i],t,e),p(l[r],t-1,e)),d(n,p(l[i+1],t,e-1),p(l[r+1],t-1,e-1)))},e.prototype.generate3D=function(t,e,r){var o=255&Math.floor(t),n=255&Math.floor(e),a=255&Math.floor(r),l=(t-=Math.floor(t),e-=Math.floor(e),r-=Math.floor(r),v(t)),i=v(e),p=v(r),u=this.p,f=u[o]+n,h=u[f]+a,f=u[f+1]+a,o=u[1+o]+n,n=u[o]+a,o=u[o+1]+a;return d(p,d(i,d(l,s(u[h],t,e,r),s(u[n],t-1,e,r)),d(l,s(u[f],t,e-1,r),s(u[o],t-1,e-1,r))),d(i,d(l,s(u[h+1],t,e,r-1),s(u[n+1],t-1,e,r-1)),d(l,s(u[f+1],t,e-1,r-1),s(u[o+1],t-1,e-1,r-1))))},e.prototype.generateSimplex2D=function(t,e){var r=.5*(Math.sqrt(3)-1),o=(3-Math.sqrt(3))/6,r=(t+e)*r,n=Math.floor(t+r),r=Math.floor(e+r),a=(n+r)*o,t=t-(n-a),e=e-(r-a);let l,i;i=e<t?(l=1,0):(l=0,1);var a=t-l+o,p=e-i+o,u=t-1+2*o,o=e-1+2*o,n=255&n,r=255&r,f=this.p,h=f[n+f[r]]%12,s=f[n+l+f[r+i]]%12,n=f[1+n+f[1+r]]%12;let c=0,g=0,M=0;f=.5-t*t-e*e,0<=f&&(f*=f,c=f*f*y(D[h],t,e)),r=.5-a*a-p*p,0<=r&&(r*=r,g=r*r*y(D[s],a,p)),f=.5-u*u-o*o;return 0<=f&&(f*=f,M=f*f*y(D[n],u,o)),70*(c+g+M)},e.prototype.generateSimplex3D=function(t,e,r){var o=1/6,n=(t+e+r)*(1/3),a=Math.floor(t+n),l=Math.floor(e+n),n=Math.floor(r+n),i=(a+l+n)*o,t=t-(a-i),e=e-(l-i),r=r-(n-i);let p,u,f,h,s,c;c=e<=t?r<=e?(p=1,u=0,f=0,h=1,s=1,0):(s=(h=(f=r<=t?(p=1,u=0):(p=0,u=0,1),1),0),1):e<r?(p=0,u=0,f=1,h=0,s=1):t<r?(p=0,u=1,f=0,h=0,s=1):(p=0,u=1,f=0,h=1,s=1,0);var i=t-p+o,g=e-u+o,M=r-f+o,D=t-h+2*o,y=e-s+2*o,o=r-c+2*o,v=t-1+.5,d=e-1+.5,m=r-1+.5,a=255&a,l=255&l,n=255&n,S=this.p,x=S[a+S[l+S[n]]]%12,b=S[a+p+S[l+u+S[n+f]]]%12,q=S[a+h+S[l+s+S[n+c]]]%12,a=S[1+a+S[1+l+S[1+n]]]%12;let V=0,W=0,w=0,C=0;l=.6-t*t-e*e-r*r,0<=l&&(l*=l,V=l*l*P(F[x],t,e,r)),S=.6-i*i-g*g-M*M,0<=S&&(S*=S,W=S*S*P(F[b],i,g,M)),n=.6-D*D-y*y-o*o,0<=n&&(n*=n,w=n*n*P(F[q],D,y,o)),l=.6-v*v-d*d-m*m;return 0<=l&&(l*=l,C=l*l*P(F[a],v,d,m)),32*(V+W+w+C)},e.prototype.generateValue2D=function(t,e){var r=Math.floor(t),o=r+1,n=Math.floor(e),a=n+1,t=v(t-r),e=v(e-n),l=this.p,n=d(t,l[r+l[255&n]&255]/255,l[o+l[255&n]&255]/255),t=d(t,l[r+l[255&a]&255]/255,l[o+l[255&a]&255]/255);return d(e,n,t)},e.prototype.generateValue3D=function(t,e,r){var o=Math.floor(t),n=o+1,a=Math.floor(e),l=a+1,i=Math.floor(r),p=i+1,t=v(t-o),e=v(e-a),r=v(r-i),u=this.p,f=u[255&o]+(255&a),a=u[255&n]+(255&a),o=u[255&o]+(255&l),n=u[255&n]+(255&l),l=d(e,d(t,u[u[f]+(255&i)]/255,u[u[a]+(255&i)]/255),d(t,u[u[f+1]+(255&i)]/255,u[u[a+1]+(255&i)]/255)),f=d(e,d(t,u[u[o]+(255&p)]/255,u[u[n]+(255&p)]/255),d(t,u[u[o+1]+(255&p)]/255,u[u[n+1]+(255&p)]/255));return d(r,l,f)},e.prototype.getCellPoint2D=function(t,e){var r=this.p,o=255&t,n=r[255&e];return[t+r[o+n&255]/256,e+r[1+o+n&255]/256]},e.prototype.getCellPoint3D=function(t,e,r){var o=this.p,n=255&t,a=o[(255&e)+o[255&r]];return[t+o[n+a&255]/256,e+o[1+n+a&255]/256,r+o[2+n+a&255]/256]},e.prototype.generateWorley2D=function(r,o){var n=Math.floor(r),a=Math.floor(o);let l=1/0;for(let e=-1;e<=1;e++)for(let t=-1;t<=1;t++){var i=n+e,p=a+t,[i,p]=this.getCellPoint2D(i,p),i=i-r,p=p-o,i=Math.sqrt(i*i+p*p);l=Math.min(l,i)}return l},e.prototype.generateWorley3D=function(o,n,a){var l=Math.floor(o),i=Math.floor(n),p=Math.floor(a);let u=1/0;for(let r=-1;r<=1;r++)for(let e=-1;e<=1;e++)for(let t=-1;t<=1;t++){var f=l+r,h=i+e,s=p+t,[f,h,s]=this.getCellPoint3D(f,h,s),f=f-o,h=h-n,s=s-a,f=Math.sqrt(f*f+h*h+s*s);u=Math.min(u,f)}return u},e.prototype.generateVoronoi2D=function(r,o){var n=Math.floor(r),a=Math.floor(o);let l=1/0,i,p;for(let e=-1;e<=1;e++)for(let t=-1;t<=1;t++){var u=n+e,f=a+t,[h,s]=this.getCellPoint2D(u,f),h=h-r,s=s-o,h=h*h+s*s;h<l&&(l=h,i=u,p=f)}return{distance:Math.sqrt(l),cellI:i,cellJ:p}},e.prototype.generateFractal2D=function(e,r,t={}){var o=t.octaves||4,n=t.persistence||.5,a=t.lacunarity||2,l=!1!==t.normalized,i=t.ridged||!1,p=t.turbulence||!1;let u=0,f=t.scale||1,h=1,s=0;for(let t=0;t<o;t++){let t=this.generate2D(e*f,r*f);i?t=1-Math.abs(t):p&&(t=Math.abs(t)),u+=t*h,s+=+h,h*=n,f*=a}return l?u/s:u},e.prototype.generateFractal3D=function(e,r,o,t={}){var n=t.octaves||4,a=t.persistence||.5,l=t.lacunarity||2,i=!1!==t.normalized,p=t.ridged||!1,u=t.turbulence||!1;let f=0,h=t.scale||1,s=1,c=0;for(let t=0;t<n;t++){let t=this.generate3D(e*h,r*h,o*h);p?t=1-Math.abs(t):u&&(t=Math.abs(t)),f+=t*s,c+=+s,s*=a,h*=l}return i?f/c:f},e.prototype.generateSimplexFractal2D=function(e,r,t={}){var o=t.octaves||4,n=t.persistence||.5,a=t.lacunarity||2,l=!1!==t.normalized,i=t.ridged||!1,p=t.turbulence||!1;let u=0,f=t.scale||1,h=1,s=0;for(let t=0;t<o;t++){let t=this.generateSimplex2D(e*f,r*f);i?t=1-Math.abs(t):p&&(t=Math.abs(t)),u+=t*h,s+=+h,h*=n,f*=a}return l?u/s:u},e.prototype.generateSimplexFractal3D=function(e,r,o,t={}){var n=t.octaves||4,a=t.persistence||.5,l=t.lacunarity||2,i=!1!==t.normalized,p=t.ridged||!1,u=t.turbulence||!1;let f=0,h=t.scale||1,s=1,c=0;for(let t=0;t<n;t++){let t=this.generateSimplex3D(e*h,r*h,o*h);p?t=1-Math.abs(t):u&&(t=Math.abs(t)),f+=t*s,c+=+s,s*=a,h*=l}return i?f/c:f},e.prototype.generate4D=function(t,e,r,o){var n=255&Math.floor(t),a=255&Math.floor(e),l=255&Math.floor(r),i=255&Math.floor(o),p=(t-=Math.floor(t),e-=Math.floor(e),r-=Math.floor(r),o-=Math.floor(o),v(t)),u=v(e),f=v(r),h=v(o),s=this.p,c=s[n]+a,g=s[c]+l,M=s[g]+i,g=s[g+1]+i,n=s[1+n]+a,a=s[n]+l,D=s[a]+i,a=s[a+1]+i,c=s[c+1]+l,y=s[c]+i,c=s[c+1]+i,n=s[n+1]+l,l=s[n]+i,n=s[n+1]+i,i=(t,e,r,o,n)=>G(E[t],e,r,o,n);return d(h,d(f,d(u,d(p,i(s[M],t,e,r,o),i(s[D],t-1,e,r,o)),d(p,i(s[y],t,e-1,r,o),i(s[l],t-1,e-1,r,o))),d(u,d(p,i(s[g],t,e,r-1,o),i(s[a],t-1,e,r-1,o)),d(p,i(s[c],t,e-1,r-1,o),i(s[n],t-1,e-1,r-1,o)))),d(f,d(u,d(p,i(s[M+1],t,e,r,o-1),i(s[D+1],t-1,e,r,o-1)),d(p,i(s[y+1],t,e-1,r,o-1),i(s[l+1],t-1,e-1,r,o-1))),d(u,d(p,i(s[g+1],t,e,r-1,o-1),i(s[a+1],t-1,e,r-1,o-1)),d(p,i(s[c+1],t,e-1,r-1,o-1),i(s[n+1],t-1,e-1,r-1,o-1)))))},e.prototype.generateSimplex4D=function(t,e,r,o){var n=(Math.sqrt(5)-1)/4,a=(5-Math.sqrt(5))/20,n=(t+e+r+o)*n,l=Math.floor(t+n),i=Math.floor(e+n),p=Math.floor(r+n),n=Math.floor(o+n),u=(l+i+p+n)*a,t=t-(l-u),e=e-(i-u),r=r-(p-u),o=o-(n-u),[u,f,h,s,c,g,M,D,y,v,d,J]=[[1,0,0,0,1,1,0,0,1,1,1,0],[1,0,0,0,1,1,0,0,1,1,1,0],[0,1,0,0,1,1,0,0,1,1,1,0],[1,0,0,0,1,0,1,0,1,1,1,0],[0,0,1,0,1,0,1,0,1,1,1,0],[0,1,0,0,0,1,1,0,1,1,1,0],[0,0,1,0,0,1,1,0,1,1,1,0],[0,0,0,1,1,0,0,1,1,1,1,0],[0,1,0,0,0,1,0,1,1,1,1,0],[0,0,1,0,0,1,0,1,1,1,1,0],[0,0,0,1,0,0,1,1,1,1,1,0],[1,0,0,0,1,0,0,1,1,1,0,1],[0,0,0,1,1,0,0,1,1,1,0,1],[0,0,0,1,0,1,0,1,1,1,0,1],[0,0,0,1,0,0,1,1,1,1,0,1],[0,0,0,1,0,0,1,1,0,1,1,1]][(e<t?32:0)+(r<t?16:0)+(r<e?8:0)+(o<t?4:0)+(o<e?2:0)+(o<r?1:0)>>>0],m=t-u+a,S=e-f+a,x=r-h+a,b=o-s+a,q=t-c+2*a,V=e-g+2*a,W=r-M+2*a,w=o-D+2*a,C=t-y+3*a,F=e-v+3*a,P=r-d+3*a,z=o-J+3*a,T=t-1+4*a,A=e-1+4*a,U=r-1+4*a,a=o-1+4*a,l=255&l,i=255&i,p=255&p,n=255&n,I=this.p,N=I[l+I[i+I[p+I[n]]]]%32,u=I[l+u+I[i+f+I[p+h+I[n+s]]]]%32,f=I[l+c+I[i+g+I[p+M+I[n+D]]]]%32,h=I[l+y+I[i+v+I[p+d+I[n+J]]]]%32,s=I[1+l+I[1+i+I[1+p+I[1+n]]]]%32;let X=0,Y=0,j=0,k=0,B=0;c=.6-t*t-e*e-r*r-o*o,0<=c&&(c*=c,X=c*c*G(E[N],t,e,r,o)),g=.6-m*m-S*S-x*x-b*b,0<=g&&(g*=g,Y=g*g*G(E[u],m,S,x,b)),M=.6-q*q-V*V-W*W-w*w,0<=M&&(M*=M,j=M*M*G(E[f],q,V,W,w)),D=.6-C*C-F*F-P*P-z*z,0<=D&&(D*=D,k=D*D*G(E[h],C,F,P,z)),y=.6-T*T-A*A-U*U-a*a;return 0<=y&&(y*=y,B=y*y*G(E[s],T,A,U,a)),27*(X+Y+j+k+B)},e.prototype.generateTiling2D=function(t,e,r={}){var o=r.periodX||256;return this.generate2D(t%o,e%(r.periodY||256))},e.prototype.warp2D=function(t,e,r={}){var o=r.warpStrength||1,n=r.warpScale||1,a=r.iterations||1;let l=t,i=e;for(let t=0;t<a;t++){var p=this.generate2D(l*n,i*n),u=this.generate2D(l*n+5.2,i*n+1.3);l+=p*o,i+=u*o}return this.generate2D(l,i)},e.prototype.generate2D01=function(t,e){return.5*(this.generate2D(t,e)+1)},e.prototype.generate3D01=function(t,e,r){return.5*(this.generate3D(t,e,r)+1)},e.prototype.generateSimplex2D01=function(t,e){return.5*(this.generateSimplex2D(t,e)+1)},e.prototype.generateSimplex3D01=function(t,e,r){return.5*(this.generateSimplex3D(t,e,r)+1)},e.prototype.generateValue2D01=function(t,e){return this.generateValue2D(t,e)},e.prototype.generateValue3D01=function(t,e,r){return this.generateValue3D(t,e,r)},e.prototype.generateWorley2D01=function(t,e){return this.generateWorley2D(t,e)/1.414},e.prototype.generateWorley3D01=function(t,e,r){return this.generateWorley3D(t,e,r)/1.732},e.prototype.generate4D01=function(t,e,r,o){return.5*(this.generate4D(t,e,r,o)+1)},e.prototype.generateSimplex4D01=function(t,e,r,o){return.5*(this.generateSimplex4D(t,e,r,o)+1)},e.prototype.generateTiling2D01=function(t,e,r){return.5*(this.generateTiling2D(t,e,r)+1)},"undefined"!=typeof module&&module.exports?module.exports=e:t.ForgeNoise=e})(this);
